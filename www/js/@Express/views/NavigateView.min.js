define(["app","@/views/CheckListView","@/views/forms/PersonView","@/views/forms/CompanyView","@/views/forms/SourcesView","storage"],function(n,t,i,r,u,f){"use strict";return Backbone.View.extend({el:$("#Navigation"),events:{"click .nav-item":"jump"},jump:function(n){n.preventDefault();f.Current=null;var t=$(n.target).closest(".nav-item");this.trans(t)},trans:function(t){if(this.$(".level-one").show(),this.$(".level-two").hide(),!t.hasClass("active")){this.$(".nav-item").removeClass("active");t.addClass("active");n.Select.set("query",t.data("name"));n.navigate(n.Select.fullpath());this.$(".level-one>div").hide();var i=t.data("name");this.$(`#${i}`).show();this.show(i)}},levelOne:function(){this.$(".level-one").show();this.$(".level-two").hide()},levelTwo:function(n){this.$(".level-one").hide();this.$(".level-two").show();this.isSources||(this.sources=(new u).render(),this.isSources=!0);this.sources.fill(n)},show:function(n){switch(n){case"CheckList":this.checkList||(this.checkList=(new t).done(function(){this.callback&&this.callback.call(this.context)},this));break;case"Person":this.personView?this.personView.render():(this.personView=(new i).render(),this.isCallback=!0);break;case"Company":this.companyView?this.companyView.render():(this.companyView=(new r).render(),this.isCallback=!0)}},initialize:function(){Backbone.on("to:robots",this.levelTwo,this);Backbone.on("to:form",this.levelOne,this)},render:function(){return this.trans(this.$(`.nav-item[data-name='${n.Select.get("query")}']`)),this},done:function(n,t){return this.callback=n,this.context=t||this,this.isCallback&&this.callback&&this.callback.call(this.context),this}})});