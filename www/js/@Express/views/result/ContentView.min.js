define(["i18n!nls/resources","g/content/ContentView"],function(n,t){"use strict";return Backbone.View.extend({el:$("#DetailContent"),initialize:function(n){this.objID=n.id;this.mode=n.mode;this.parentID=n.objid},render:function(){var i,r;switch(this.mode){case"fact":i=new t({url:"/api/facts/InSources/"+this.objID,objID:this.objID}).setElement(this.$el).done(function(){this.callback();i.model?$(document).find("head>title").text(i.model.get("Display_Name")+" :: "+n.titleFacts):($(".obj-title").text(n.isEmpty),$(document).find("head>title").text(n.isEmpty+" :: "+n.titleFacts))},this).render();break;case"doc":new t({objID:this.objID}).setElement(this.$el).done(t=>{this.callback(),$(document).find("head>title").text(t.model.get("Display_Name")+" :: "+n.titleDocs)}).render();break;case"original":$.get("/api/original/startconvert?id="+this.parentID);r=$('<div id="inLoad"><\/div>');this.$el.html(r);Backbone.trigger("message:modal");this.counter=0;this.si=setInterval(function(){this.counter++;this.counter>50?(clearInterval(this.si),Backbone.trigger("message:hide"),this.$("#inLoad").html(n.timeended)):$.get("/api/original/checkconvert?uid="+this.objID).done(function(n){this.stopConvert({status:n,counter:this.counter})}.bind(this)).fail(function(){Backbone.trigger("message:hide");clearInterval(this.si)}.bind(this))}.bind(this),2e3)}return this},done:function(n,t){return this.callback=n,this.context=t,this},stopConvert:function(t){var u=t.status,e=t.counter,r,f,i;if(u===200)this.Visualization?($.xhrAbortAll(),r=this,require(["/js/@Wall/views/ReportView.js"],function(n){n.setElement(r.$("#inLoad")).render(r.RelativePath)})):this.$el.find("iframe").size()?$.xhrAbortAll():(f="/Temp/OD/"+this.objID+"/"+this.objID+".html",this.$("#inLoad").html("<iframe src="+f+" style='width:98%;height:99%;'><\/iframe>")),clearInterval(this.si),this.callback&&this.callback.call(this.context);else{i=n.convert+", "+n.wait;switch(u){case 404:i=n.converterror+": 404";clearInterval(this.si);this.callback&&this.callback.call(this.context);break;case 500:i=n.converterror+": 500";clearInterval(this.si);this.callback&&this.callback.call(this.context)}this.$("#inLoad").text(i)}}})});